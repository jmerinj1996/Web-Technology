<html>
<head>
    <meta charset="UTF-8"> 
<title>Form Page</title> 
<style>
form {
        text-align: center;
        margin-top: 100px;
    }  
</style>
</head>
<body>
<form action="#">
    <b>Enter URL for Trucking List JSON File</b><br>
    <input type="text" id="textbox" >
    <br><br>
    <input type="submit" value="Submit Query " onclick="file_name()">
</form> 

<script type="text/javascript">
var jsonDoc;
function loadJSON (url) 
    {
        var xmlhttp=new XMLHttpRequest();
        xmlhttp.overrideMimeType("application/json");
        xmlhttp.open("GET",url,false); 
        try {
                        xmlhttp.send();
            }
       catch(err)
            {
               return;
            } 
            jsonDoc=xmlhttp.responseText;
            return jsonDoc;
    }
function file_name()
    {
        var url=document.getElementById("textbox").value;
        if(url=="")
            {
                alert("Error: Enter file name in text field");
            }
        else
            {
                try
                    {   
                var obj=JSON.parse(loadJSON(url));
                    }
                catch(err)
                    {
                       alert("Error: File does not exist"); 
                        return;
                    }
                if(obj.Mainline.Table.Row)
                 {
                    var myWindow = window.open("", "", "width=1190px,toolbar=yes,scrollbars=yes","");
                    myWindow.document.write("<html><head><title>Top Trucking Companies</title><style>table,td,th { border: 1px solid black;} #id0 {font-weight:bold;} img {width:300px; height: auto;}</style></head><body><table><tr>");
                    for(var i=0;i<=obj.Mainline.Table.Header.Data.length;i++)
                    {
                        if(obj.Mainline.Table.Header.Data.hasOwnProperty(i))
                        {
                            if(obj.Mainline.Table.Header.Data[i]==null){myWindow.document.write("<th></th>");}else
                            {myWindow.document.write("<th>" + obj.Mainline.Table.Header.Data[i] + "</th>");}
                        }
                    }      
                    myWindow.document.write("</tr>");
                    for(var i=0;i<obj.Mainline.Table.Row.length;i++)
                    {
                        if(obj.Mainline.Table.Row.hasOwnProperty(i)) 
                        {
                            if(obj.Mainline.Table.Row[i].Company==null){myWindow.document.write("<tr><td></td>");}else   
                            {myWindow.document.write("<tr><td>" + obj.Mainline.Table.Row[i].Company + "</td>");}
                            if(obj.Mainline.Table.Row[i].Services==null){myWindow.document.write("<td></td>");}else
                            {myWindow.document.write("<td>" + obj.Mainline.Table.Row[i].Services + "</td>");}
                            myWindow.document.write("<td><ul>");
                            for(var j=0;j<obj.Mainline.Table.Row[i].Hubs.Hub.length;j++)
                                {
                                    if(obj.Mainline.Table.Row[i].Hubs.Hub[j]==null||obj.Mainline.Table.Row[i].Hubs.Hub[j]==""){ myWindow.document.write("");}else
                                    {myWindow.document.write("<li id=id"+j+">" + obj.Mainline.Table.Row[i].Hubs.Hub[j] + "</li>");}
                                }
                            myWindow.document.write("</td></ul>");
                            if(obj.Mainline.Table.Row[i].Revenue==null){ myWindow.document.write("<td></td>");}else
                            {myWindow.document.write("<td>" + obj.Mainline.Table.Row[i].Revenue + "</td>");}
                            if(obj.Mainline.Table.Row[i].HomePage==null){ myWindow.document.write("<td></td>");}else
                            {myWindow.document.write("<td><a href=" + obj.Mainline.Table.Row[i].HomePage + ">"+obj.Mainline.Table.Row[i].HomePage+"</a></td>");}
                            if(obj.Mainline.Table.Row[i].Logo==null){myWindow.document.write("<td></td></tr>");}else
                            {myWindow.document.write("<td><img src=" + obj.Mainline.Table.Row[i].Logo + "></td></tr>");}     
            
                        }
                    }
                }
                else
                    {
                        alert("Error: No trucking companies to display");
                    }
            myWindow.document.write("</table></body></html>");
        }    
    }
</script> 
</body>
</html>